# CONTRIBUTING.md

## Overview
Thank you for contributing to the **Shamrock Bail Bonds Portal**.  
This guide explains how to contribute code, documentation, or process improvements.

---

## Branching Model
- `main` → stable, production-ready.  
- `staging` → integration branch for testing.  
- feature branches → `feature/<short-description>`  
- hotfix branches → `hotfix/<issue>`  

---

## Pull Requests
1. Fork the repo (if external) or create a feature branch.  
2. Write clear commit messages (see below).  
3. Run local validation (lint + schema check).  
4. Open PR against `staging`.  
5. PR must be reviewed by Brendan (owner) before merge.  

---

## Commit Message Format

**Examples**
- `frontend: add defendant check-in wizard`
- `backend: fix /payments capture bug`
- `docs: update SCHEMAS.md with new conditional`

---

## Coding Standards
- **Frontend (Velo/JS)**:
  - Follow STYLEGUIDE.md.
  - Use `wix-fetch` for API calls.
  - Validate inputs against schemas before submit.

- **Backend (Node/FastAPI)**:
  - Follow API_SPEC.md.
  - Always return JSON with correct HTTP codes.
  - Use OpenAPI spec (`shamrock_openapi.yaml`) for consistency.

---

## Testing
- Validate schemas against `SCHEMAS.md`.
- Verify PDF anchors (PDF_TEMPLATES.md).
- Run automated unit tests before PR.
- Test both Defendant + Indemnitor flows.

---

## Documentation
- Update relevant `.md` files if you add new features or change workflows.
- Keep API changes reflected in API_SPEC.md.
- New schema? → Update SCHEMAS.md and add sample payload.

---

## Security
- Never commit secrets. Use `.env` only.  
- All PII must be encrypted at rest.  
- Validate JWT + magic links in dev.  
- Follow SECURITY.md checklist.

---

## AI Agent Contributions
If AI-generated code (e.g. from Manus):
- Must comply with STYLEGUIDE.md.  
- Must be validated by schema and lint.  
- PR description must state: **“Generated by Manus, human-reviewed.”**

---

## Code of Conduct
- Respect other contributors.  
- Keep comments professional.  
- Security issues must be reported privately, not as public issues.

---

## Getting Help
- Staff Ops questions → see OPS.md.  
- Deployment questions → see DEPLOYMENT.md.  
- Security concerns → see SECURITY.md.  
- For unclear cases, ask Brendan directly.
